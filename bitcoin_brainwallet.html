<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Address Generator</title>
</head>
<body>
    <h1>Bitcoin Address Generator</h1>
    <p>Enter a passphrase to generate a Bitcoin private key and address:</p>
    <input type="text" id="passphrase" placeholder="Enter passphrase" style="width: 300px;">
    <button onclick="generateBitcoinAddress()">Generate</button>

    <h2>Results:</h2>
    <p><strong>Private Key:</strong> <span id="privateKey"></span></p>
    <p><strong>Bitcoin Address:</strong> <span id="bitcoinAddress"></span></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/elliptic/6.5.4/elliptic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/buffer/6.0.3/buffer.min.js"></script>

    <script>
        function generateBitcoinAddress() {
            const passphrase = document.getElementById('passphrase').value;

            // Hash the passphrase to create a private key
            const privateKey = CryptoJS.SHA256(passphrase).toString();

            // Initialize elliptic curve
            const EC = elliptic.ec;
            const ec = new EC('secp256k1');

            // Generate the public key from the private key
            const keyPair = ec.keyFromPrivate(privateKey);
            const publicKey = keyPair.getPublic().encode('hex');

            // Perform SHA-256 and RIPEMD-160 hashing on the public key
            const publicKeyHash = CryptoJS.RIPEMD160(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(publicKey))).toString();

            // Add version byte (0x00 for mainnet) in front of the public key hash
            const versionedPayload = "00" + publicKeyHash;

            // Perform double SHA-256 hashing on the versioned payload
            const checksum = CryptoJS.SHA256(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(versionedPayload))).toString().substr(0, 8);

            // Add the 4 checksum bytes at the end of the versioned payload
            const binaryAddress = versionedPayload + checksum;

            // Convert the binary address to Base58Check encoding
            const bitcoinAddress = toBase58Check(binaryAddress);

            // Display the results
            document.getElementById('privateKey').textContent = privateKey;
            document.getElementById('bitcoinAddress').textContent = bitcoinAddress;
        }

        function toBase58Check(hex) {
            const alphabet = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
            const buffer = Buffer.from(hex, 'hex');

            let num = BigInt('0x' + buffer.toString('hex'));
            let encoded = '';
            while (num > 0) {
                const remainder = num % 58n;
                num = num / 58n;
                encoded = alphabet[remainder] + encoded;
            }

            // Leading zeroes
            for (let i = 0; i < buffer.length && buffer[i] === 0; i++) {
                encoded = '1' + encoded;
            }

            return encoded;
        }
    </script>
</body>
</html>
